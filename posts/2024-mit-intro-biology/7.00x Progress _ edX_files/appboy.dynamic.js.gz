window['appboyDeps'] = ["/integrations/vendor/commons.c42222c4cb2f8913500f.js"];window['appboyLoader'] = function() { return window.appboyIntegration=function(e){function t(t){for(var o,i,a=t[0],p=t[1],u=t[2],l=0,d=[];l<a.length;l++)i=a[l],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(o in p)Object.prototype.hasOwnProperty.call(p,o)&&(e[o]=p[o]);for(b&&b(t);d.length;)d.shift()();return n.push.apply(n,u||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],o=!0,a=1;a<s.length;a++){var p=s[a];0!==r[p]&&(o=!1)}o&&(n.splice(t--,1),e=i(i.s=s[0]))}return e}var o={},r={10:0},n=[];function i(t){if(o[t])return o[t].exports;var s=o[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=o,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(s,o,function(t){return e[t]}.bind(null,o));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var a=window.webpackJsonp_name_Integration=window.webpackJsonp_name_Integration||[],p=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var b=p;return n.push(["qPA0",0]),s()}({Wo50:function(e,t){var s={shouldOpenSession:function(e,t){return!(!e&&t.onlyTrackKnownUsersOnWeb)},getCustomEndpoint:function(e){var t;if(e.customEndpoint){var s=e.customEndpoint;t=(new RegExp("^(http|https)://","i").test(s)?s:"https://"+s)+"/api/v3"}else"eu"===e.datacenter&&(t="https://sdk.fra-01.braze.eu/api/v3");return t},getMajorVersion:function(e){return Math.floor(Number(e.version))},isMajorVersionTwo:function(e){return 2===s.getMajorVersion(e)},isMajorVersionThree:function(e){return 3===s.getMajorVersion(e)},getConfig:function(e){var t={};if(s.isMajorVersionTwo(e)||s.isMajorVersionThree(e))t={safariWebsitePushId:e.safariWebsitePushId,enableHtmlInAppMessages:e.enableHtmlInAppMessages,allowCrawlerActivity:e.allowCrawlerActivity,doNotLoadFontAwesome:e.doNotLoadFontAwesome,enableLogging:e.enableLogging,localization:e.localization,minimumIntervalBetweenTriggerActionsInSeconds:Number(e.minimumIntervalBetweenTriggerActionsInSeconds)||30,openInAppMessagesInNewTab:e.openInAppMessagesInNewTab,openNewsFeedCardsInNewTab:e.openNewsFeedCardsInNewTab,requireExplicitInAppMessageDismissal:e.requireExplicitInAppMessageDismissal,serviceWorkerLocation:e.serviceWorkerLocation,sessionTimeoutInSeconds:Number(e.sessionTimeoutInSeconds)||30};else{if(e.safariWebsitePushId&&(t.safariWebsitePushId=e.safariWebsitePushId),e.enableHtmlInAppMessages&&(t.enableHtmlInAppMessages=!0),e.customEndpoint){var o=e.customEndpoint,r=new RegExp("^(http|https)://","i");t.baseUrl=(r.test(o)?o:"https://"+o)+"/api/v3"}else t.baseUrl=({us:"https://sdk.iad-01.braze.com",us02:"https://sdk.iad-02.braze.com",us03:"https://sdk.iad-03.braze.com",eu:"https://sdk.fra-01.braze.eu"}[e.datacenter]||"https://sdk.iad-01.braze.com")+"/api/v3"}var n=s.getCustomEndpoint(e);return n&&(t.baseUrl=n),t}};e.exports=s},qPA0:function(e,t,s){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=s("hjHq"),n=s("NGGi").Track,i=s("6YGp"),a=s("WiAo").del,p=s("SnsM"),u=s("Wo50"),b=e.exports=r("Appboy").global("appboy").option("apiKey","").option("safariWebsitePushId","").option("allowCrawlerActivity",!1).option("doNotLoadFontAwesome",!1).option("enableLogging",!1).option("automaticallyDisplayMessages",!0).option("localization","en").option("minimumIntervalBetweenTriggerActionsInSeconds",30).option("openInAppMessagesInNewTab",!1).option("openNewsFeedCardsInNewTab",!1).option("sessionTimeoutInSeconds",30).option("requireExplicitInAppMessageDismissal",!1).option("enableHtmlInAppMessages",!1).option("trackAllPages",!1).option("trackNamedPages",!1).option("customEndpoint","").option("version",1).option("logPurchaseWhenRevenuePresent",!1).option("onlyTrackKnownUsersOnWeb",!1).tag("v1",'<script src="https://js.appboycdn.com/web-sdk/1.6/appboy.min.js">').tag("v2",'<script src="https://js.appboycdn.com/web-sdk/2.4/appboy.min.js">').tag("v2.7",'<script src="https://js.appboycdn.com/web-sdk/2.7/appboy.min.js">').tag("v3.1",'<script src="https://js.appboycdn.com/web-sdk/3.1/appboy.min.js">');function l(e,t,s){var o=new n({properties:e}),r=o.productId(),i=o.price(),p=o.quantity(),u=o.properties(),b={};for(var l in a(u,"productId"),a(u,"price"),a(u,"quantity"),u)if(u.hasOwnProperty(l)){var y=u[l];d(l,y)&&(b[l]=y)}for(var c in s)if(s.hasOwnProperty(c)){var g=s[c];!u.hasOwnProperty(c)&&d(c,g)&&(b[c]=g)}window.appboy.logPurchase(r,i,t,p,b)}function d(e,t){return!(e.length>255||e.startsWith("$"))&&("number"==typeof t||"boolean"==typeof t||(!!y(t)||("string"==typeof t||t instanceof String)&&t.length<=255))}function y(e){return"object"===o(e)&&e instanceof Date}b.prototype.appboyInitialize=function(e,t,s){window.appboy.initialize(t.apiKey,s),t.automaticallyDisplayMessages&&window.appboy.display.automaticallyShowNewInAppMessages(),e&&window.appboy.changeUser(e),window.appboy.openSession()},b.prototype.initialize=function(){u.isMajorVersionThree(this.options)?this.initializeV3():u.isMajorVersionTwo(this.options)?this.initializeV2():this.initializeV1()},b.prototype.initializeV1=function(){var e=this.options,t=this,s=this.analytics.user().id();!function(e,t,s,o,r){window.appboy={};for(var n="destroy toggleAppboyLogging setLogger openSession changeUser requestImmediateDataFlush requestFeedRefresh subscribeToFeedUpdates logCardImpressions logCardClick logFeedDisplayed requestInAppMessageRefresh logInAppMessageImpression logInAppMessageClick logInAppMessageButtonClick subscribeToNewInAppMessages removeSubscription removeAllSubscriptions logCustomEvent logPurchase isPushSupported isPushBlocked isPushGranted isPushPermissionGranted registerAppboyPushMessages unregisterAppboyPushMessages submitFeedback ab ab.User ab.User.Genders ab.User.NotificationSubscriptionTypes ab.User.prototype.getUserId ab.User.prototype.setFirstName ab.User.prototype.setLastName ab.User.prototype.setEmail ab.User.prototype.setGender ab.User.prototype.setDateOfBirth ab.User.prototype.setCountry ab.User.prototype.setHomeCity ab.User.prototype.setEmailNotificationSubscriptionType ab.User.prototype.setPushNotificationSubscriptionType ab.User.prototype.setPhoneNumber ab.User.prototype.setAvatarImageUrl ab.User.prototype.setLastKnownLocation ab.User.prototype.setUserAttribute ab.User.prototype.setCustomUserAttribute ab.User.prototype.addToCustomAttributeArray ab.User.prototype.removeFromCustomAttributeArray ab.User.prototype.incrementCustomUserAttribute ab.InAppMessage ab.InAppMessage.SlideFrom ab.InAppMessage.ClickAction ab.InAppMessage.DismissType ab.InAppMessage.OpenTarget ab.InAppMessage.ImageStyle ab.InAppMessage.Orientation ab.InAppMessage.CropType ab.InAppMessage.prototype.subscribeToClickedEvent ab.InAppMessage.prototype.subscribeToDismissedEvent ab.InAppMessage.prototype.removeSubscription ab.InAppMessage.prototype.removeAllSubscriptions ab.InAppMessage.Button ab.InAppMessage.Button.prototype.subscribeToClickedEvent ab.InAppMessage.Button.prototype.removeSubscription ab.InAppMessage.Button.prototype.removeAllSubscriptions ab.SlideUpMessage ab.ModalMessage ab.FullScreenMessage ab.ControlMessage ab.Feed ab.Feed.prototype.getUnreadCardCount ab.Card ab.ClassicCard ab.CaptionedImage ab.Banner ab.WindowUtils display display.automaticallyShowNewInAppMessages display.showInAppMessage display.showFeed display.destroyFeed display.toggleFeed sharedLib".split(" "),i=0;i<n.length;i++){for(var a=appboy,p=n[i].split("."),u=0;u<p.length-1;u++)a=a[p[u]];a[p[u]]=function(){console&&console.error("The Appboy SDK has not yet been loaded.")}}appboy.initialize=function(){console&&console.error("Appboy cannot be loaded - this is usually due to strict corporate firewalls or ad blockers.")},appboy.getUser=function(){return new appboy.ab.User},appboy.getCachedFeed=function(){return new appboy.ab.Feed}}(document),this._shim=window.appboy.initialize,this.load("v1",(function(){if(u.shouldOpenSession(s,e)){t.hasBeenInitialized=!0;var o=u.getConfig(e);t.initializeTester(e.apiKey,o),t.appboyInitialize(s,e,o)}t.ready()}))},b.prototype.initializeV2=function(){var e=this.options,t=this.analytics.user().id();if(function(e,t,s,o,r){window.appboy={},window.appboyQueue=[];for(var n="initialize destroy getDeviceId toggleAppboyLogging setLogger openSession changeUser requestImmediateDataFlush requestFeedRefresh subscribeToFeedUpdates logCardImpressions logCardClick logFeedDisplayed requestInAppMessageRefresh logInAppMessageImpression logInAppMessageClick logInAppMessageButtonClick logInAppMessageHtmlClick subscribeToNewInAppMessages removeSubscription removeAllSubscriptions logCustomEvent logPurchase isPushSupported isPushBlocked isPushGranted isPushPermissionGranted registerAppboyPushMessages unregisterAppboyPushMessages submitFeedback trackLocation stopWebTracking resumeWebTracking wipeData ab ab.User ab.User.Genders ab.User.NotificationSubscriptionTypes ab.User.prototype.getUserId ab.User.prototype.setFirstName ab.User.prototype.setLastName ab.User.prototype.setEmail ab.User.prototype.setGender ab.User.prototype.setDateOfBirth ab.User.prototype.setCountry ab.User.prototype.setHomeCity ab.User.prototype.setLanguage ab.User.prototype.setEmailNotificationSubscriptionType ab.User.prototype.setPushNotificationSubscriptionType ab.User.prototype.setPhoneNumber ab.User.prototype.setAvatarImageUrl ab.User.prototype.setLastKnownLocation ab.User.prototype.setUserAttribute ab.User.prototype.setCustomUserAttribute ab.User.prototype.addToCustomAttributeArray ab.User.prototype.removeFromCustomAttributeArray ab.User.prototype.incrementCustomUserAttribute ab.User.prototype.addAlias ab.InAppMessage ab.InAppMessage.SlideFrom ab.InAppMessage.ClickAction ab.InAppMessage.DismissType ab.InAppMessage.OpenTarget ab.InAppMessage.ImageStyle ab.InAppMessage.TextAlignment ab.InAppMessage.Orientation ab.InAppMessage.CropType ab.InAppMessage.prototype.subscribeToClickedEvent ab.InAppMessage.prototype.subscribeToDismissedEvent ab.InAppMessage.prototype.removeSubscription ab.InAppMessage.prototype.removeAllSubscriptions ab.InAppMessage.Button ab.InAppMessage.Button.prototype.subscribeToClickedEvent ab.InAppMessage.Button.prototype.removeSubscription ab.InAppMessage.Button.prototype.removeAllSubscriptions ab.SlideUpMessage ab.ModalMessage ab.FullScreenMessage ab.HtmlMessage ab.ControlMessage ab.Feed ab.Feed.prototype.getUnreadCardCount ab.Card ab.ClassicCard ab.CaptionedImage ab.Banner ab.WindowUtils display display.automaticallyShowNewInAppMessages display.showInAppMessage display.showFeed display.destroyFeed display.toggleFeed sharedLib".split(" "),i=0;i<n.length;i++){for(var a=n[i],p=appboy,u=a.split("."),b=0;b<u.length-1;b++)p=p[u[b]];p[u[b]]=new Function("return function "+a.replace(/\./g,"_")+"(){appboyQueue.push(arguments); return true}")()}appboy.getUser=function(){return new appboy.ab.User},appboy.getCachedFeed=function(){return new appboy.ab.Feed}}(window,document),u.shouldOpenSession(t,e)){this.hasBeenInitialized=!0;var s=u.getConfig(e);this.initializeTester(e.apiKey,s),this.appboyInitialize(t,e,s)}var o=2.7===Number(e.version)?"v2.7":"v2";this.load(o,this.ready)},b.prototype.initializeV3=function(){var e=this.options,t=this.analytics.user().id();if(function(e,t,s,o,r){e.appboy={},e.appboyQueue=[];for(var n="DeviceProperties Card Card.prototype.dismissCard Card.prototype.removeAllSubscriptions Card.prototype.removeSubscription Card.prototype.subscribeToClickedEvent Card.prototype.subscribeToDismissedEvent Banner CaptionedImage ClassicCard ControlCard ContentCards ContentCards.prototype.getUnviewedCardCount Feed Feed.prototype.getUnreadCardCount ControlMessage InAppMessage InAppMessage.SlideFrom InAppMessage.ClickAction InAppMessage.DismissType InAppMessage.OpenTarget InAppMessage.ImageStyle InAppMessage.Orientation InAppMessage.TextAlignment InAppMessage.CropType InAppMessage.prototype.closeMessage InAppMessage.prototype.removeAllSubscriptions InAppMessage.prototype.removeSubscription InAppMessage.prototype.subscribeToClickedEvent InAppMessage.prototype.subscribeToDismissedEvent FullScreenMessage ModalMessage HtmlMessage SlideUpMessage User User.Genders User.NotificationSubscriptionTypes User.prototype.addAlias User.prototype.addToCustomAttributeArray User.prototype.getUserId User.prototype.incrementCustomUserAttribute User.prototype.removeFromCustomAttributeArray User.prototype.setAvatarImageUrl User.prototype.setCountry User.prototype.setCustomLocationAttribute User.prototype.setCustomUserAttribute User.prototype.setDateOfBirth User.prototype.setEmail User.prototype.setEmailNotificationSubscriptionType User.prototype.setFirstName User.prototype.setGender User.prototype.setHomeCity User.prototype.setLanguage User.prototype.setLastKnownLocation User.prototype.setLastName User.prototype.setPhoneNumber User.prototype.setPushNotificationSubscriptionType InAppMessageButton InAppMessageButton.prototype.removeAllSubscriptions InAppMessageButton.prototype.removeSubscription InAppMessageButton.prototype.subscribeToClickedEvent display display.automaticallyShowNewInAppMessages display.destroyFeed display.hideContentCards display.showContentCards display.showFeed display.showInAppMessage display.toggleContentCards display.toggleFeed changeUser destroy getDeviceId initialize isPushBlocked isPushGranted isPushPermissionGranted isPushSupported logCardClick logCardDismissal logCardImpressions logContentCardsDisplayed logCustomEvent logFeedDisplayed logInAppMessageButtonClick logInAppMessageClick logInAppMessageHtmlClick logInAppMessageImpression logPurchase openSession registerAppboyPushMessages removeAllSubscriptions removeSubscription requestContentCardsRefresh requestFeedRefresh requestImmediateDataFlush resumeWebTracking setLogger stopWebTracking subscribeToContentCardsUpdates subscribeToFeedUpdates subscribeToInAppMessage subscribeToNewInAppMessages toggleAppboyLogging trackLocation unregisterAppboyPushMessages wipeData".split(" "),i=0;i<n.length;i++){for(var a=n[i],p=e.appboy,u=a.split("."),b=0;b<u.length-1;b++)p=p[u[b]];p[u[b]]=new Function("return function "+a.replace(/\./g,"_")+"(){window.appboyQueue.push(arguments); return true}")()}window.appboy.getCachedContentCards=function(){return new window.appboy.ContentCards},window.appboy.getCachedFeed=function(){return new window.appboy.Feed},window.appboy.getUser=function(){return new window.appboy.User}}(window,document),u.shouldOpenSession(t,e)){this.hasBeenInitialized=!0;var s=u.getConfig(e);this.initializeTester(e.apiKey,s),this.appboyInitialize(t,e,s)}this.load("v3.1",this.ready)},b.prototype.shouldHandleEvent=function(){return!this.options.onlyTrackKnownUsersOnWeb||this.hasBeenInitialized},b.prototype.initializeTester=function(){},b.prototype.loaded=function(){var e=this.options;return 2===Number(e.version)?null===window.appboyQueue:window.appboy&&window.appboy.initialize!==this._shim},b.prototype.identify=function(e){var t=e.userId(),s=e.address(),r=e.avatar(),n=e.birthday(),a=e.email(),b=e.firstName(),l=e.gender(),d=e.lastName(),c=e.phone(),g=p(e.traits()),m=this.options;if(this.options.onlyTrackKnownUsersOnWeb&&t&&!this.hasBeenInitialized){this.hasBeenInitialized=!0;var h=u.getConfig(m);this.initializeTester(m.apiKey,h),this.appboyInitialize(t,m,h)}if(!this.options.onlyTrackKnownUsersOnWeb||this.hasBeenInitialized){t&&window.appboy.changeUser(t),r&&window.appboy.getUser().setAvatarImageUrl(r),a&&window.appboy.getUser().setEmail(a),b&&window.appboy.getUser().setFirstName(b),l&&window.appboy.getUser().setGender(function(e){if(!e)return;if("string"!=typeof e)return;var t=["man","male","m"],s=["other","o"];if(["woman","female","w","f"].indexOf(e.toLowerCase())>-1)return window.appboy.ab.User.Genders.FEMALE;if(t.indexOf(e.toLowerCase())>-1)return window.appboy.ab.User.Genders.MALE;if(s.indexOf(e.toLowerCase())>-1)return window.appboy.ab.User.Genders.OTHER}(l)),d&&window.appboy.getUser().setLastName(d),c&&window.appboy.getUser().setPhoneNumber(c),s&&(window.appboy.getUser().setCountry(s.country),window.appboy.getUser().setHomeCity(s.city)),s&&(window.appboy.getUser().setCountry(s.country),window.appboy.getUser().setHomeCity(s.city)),n&&window.appboy.getUser().setDateOfBirth(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate());i((function(e){delete g[e]}),["avatar","address","birthday","email","id","firstName","gender","lastName","phone","facebook","twitter","first_name","last_name","dob","external_id","country","home_city","bio","gender","phone","email_subscribe","push_subscribe"]),i((function(e,t){null===e||"object"!==o(e)||Array.isArray(e)||y(e)||delete g[t]}),g),i((function(e,t){window.appboy.getUser().setCustomUserAttribute(t,e)}),g)}},b.prototype.group=function(e){if(this.shouldHandleEvent()){var t=e.userId(),s="ab_segment_group_"+e.groupId();t&&window.appboy.changeUser(t),window.appboy.getUser().setCustomUserAttribute(s,!0)}},b.prototype.track=function(e){if(this.shouldHandleEvent()){var t=e.userId(),s=e.event(),r=e.properties();t&&window.appboy.changeUser(t),this.options.logPurchaseWhenRevenuePresent&&r.revenue?this.orderCompleted(e):(i((function(e,t){null==e||"object"!==o(e)||y(e)||delete r[t]}),r),window.appboy.logCustomEvent(s,r))}},b.prototype.page=function(e){if(this.shouldHandleEvent()){var t=this.options;if((t.trackAllPages||t.trackNamedPages)&&(!t.trackNamedPages||e.name())){var s=e.userId(),o=e.track(e.fullName()).event(),r=e.properties();s&&window.appboy.changeUser(s),window.appboy.logCustomEvent(o,r)}}},b.prototype.orderCompleted=function(e){if(this.shouldHandleEvent()){var t=e.userId(),s=e.products(),o=e.currency(),r=e.properties();t&&window.appboy.changeUser(t),a(r,"products"),a(r,"currency");for(var n=0;n<s.length;n++)l(s[n],o,r)}}}});
//# sourceMappingURL=appboy.js.map
};